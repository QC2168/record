---
title: CSSè¿½è¸ªç‰¹æ•ˆçš„æ¸å˜æŒ‰é’®
tags: [CSS]
---

### å†™ä¸€ä¸ªå¸¦è¿½è¸ªç‰¹æ•ˆçš„æ¸å˜æŒ‰é’®


å¼€å¤´å…ˆè§‚çœ‹è¿™å¼ `GIF`å›¾ï¼š

![feat-btn](https://raw.githubusercontent.com/QC2168/note-img/main/feat-btn.gif)

æ˜¯å¦è¢«å®ƒçš„å‡ºè‰²åŠ¨ç”»æ•ˆæœæ‰€å¸å¼•ï¼Ÿ

è¿™æ˜¯ä»ä¸€ä¸ªå®Œç¾ç«æŠ€å¹³å°ä¸­å½•åˆ¶å‡ºæ¥çš„

æˆ‘è„‘æµ·ä¸­èŒç”Ÿäº†ç”¨`CSS`æ¥æ¨¡ä»¿è¿™ä¸€æ•ˆæœçš„å¿µå¤´

> å¦‚æœæ‚¨ä¸æƒ³çœ‹å®ç°è¿‡ç¨‹ï¼Œå¯ä»¥ç›´æ¥è·³è½¬åˆ°æ–‡æœ«æŸ¥çœ‹å®Œæ•´å®ç°ä»£ç  ğŸš€

## ç»˜ç”»å…ƒç´ 

æˆ‘ä»¬å…ˆè®°å½•ä¸‹è¿™ä¸ªæŒ‰é’®æµ®åŠ¨çš„é¢œè‰²ï¼ˆ`#868BFF`ï¼‰ï¼Œè¿˜æœ‰æŒ‰é’®çš„èƒŒæ™¯çš„æ¸å˜è‰²ï¼ˆ`#39D5FF`->`#868bff`ï¼‰

å¤–éƒ¨ä½¿ç”¨ä¸€ä¸ª`div`å…ƒç´ è¡¨ç¤ºä¸€ä¸ªè‡ªå®šä¹‰æŒ‰é’®å…ƒç´ ï¼Œå†…éƒ¨åŒ…å«ä¸€ä¸ª`div`å…ƒç´ ï¼ˆ`follow`ï¼‰ï¼Œç”¨äºå®ç°ä¸€ä¸ªå°¾éšé¼ æ ‡çš„æ•ˆæœã€‚

å½“é¼ æ ‡ç§»åŠ¨åˆ°æŒ‰é’®ä¸Šæ—¶ï¼Œ`follow`å…ƒç´ å°†è·Ÿéšé¼ æ ‡çš„ä½ç½®ï¼Œåˆ›é€ å‡ºä¸€ä¸ªè§†è§‰ä¸Šçš„å°¾éšæ•ˆæœï¼Œä»¥å¢å¼ºç”¨æˆ·ç•Œé¢çš„äº¤äº’æ€§

```html
<div class="custom-button">
  <div class="follow"></div>
  æŒ‰é’®
</div>
```

æ¥ä¸‹æ¥ï¼Œç»“åˆæˆ‘ä»¬ä¹‹å‰è®°å½•ä¸‹æ¥çš„è‰²å€¼ï¼Œç»™æŒ‰é’®æ·»åŠ ä¸Šæ¸å˜è‰²å’Œæµ®åŠ¨çš„å…ƒç´ 

```css
.custom-button {
  height: 80px;
  width: 400px;
  background: linear-gradient(to right, #39D5FF, #868bff);
  color: #fff;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  overflow: hidden;
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
}

.follow {
  width: 180px;
  height: 180px;
  background: radial-gradient(circle, #868bff 0%, transparent 70%, transparent 100%);
  transform-origin: center;
  position: absolute;
  left: 0;
  top: 0;
}
```
è®¾ç½®å®Œæ¯•åï¼Œä½ å°†ä¼šå¾—åˆ°ä»¥ä¸‹è¿™ä¸ªæ•ˆæœå›¾

![20231028173256](https://raw.githubusercontent.com/QC2168/note-img/main/20231028173256.png)

## ç»‘å®šäº‹ä»¶

åœ¨æˆ‘ä»¬å½•åˆ¶çš„`GIF`å›¾ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å½“æˆ‘ä»¬é¼ æ ‡ç§»åŠ¨åˆ°æŒ‰é’®ä¸Šé¢çš„æ—¶å€™ï¼Œä¼šå‡ºç°ä¸€ä¸ªåŠ¨ç”»æ•ˆæœçš„è½¯åŒ–è¾¹ç¼˜åœ†å½¢ï¼Œä»¥å¢å¼ºå…ƒç´ çš„è§†è§‰å¸å¼•åŠ›

ä½ æ˜¯ä¸æ˜¯ä¹Ÿå’Œæˆ‘ä¸€æ ·ç¬¬ä¸€æ—¶é—´æƒ³åˆ°äº†åˆ©ç”¨`mousemove`äº‹ä»¶æ¥ç›‘å¬é¼ æ ‡ç§»åŠ¨

æˆ‘ä»¬ç»™å¤–éƒ¨çš„`div`ç»‘å®šä¸Š`mousemove`äº‹ä»¶

```html
<div class="custom-button" @mousemove="move">
  <span class="follow"></span>
  æŒ‰é’®
</div>
```
```js
const move=()=>{}
```

é€šè¿‡`mouseEvent`äº‹ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥æ‹¿åˆ°å¾ˆå¤šå…³äºé¼ æ ‡çš„å„ç§ä¿¡æ¯ï¼Œä¾‹å¦‚é¼ æ ‡çš„ä½ç½®ï¼ŒæŒ‰é’®çŠ¶æ€ï¼Œäº‹ä»¶ç±»å‹...

> å¦‚æœæ‚¨å¯¹`mouseEvent`äº‹ä»¶ä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼Œå¯ä»¥çœ‹çœ‹è¿™é‡Œ [MouseEvent](https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent)

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€šè¿‡`mouseEvent`äº‹ä»¶æ‹¿åˆ°`offsetX`å’Œ`offsetY`å±æ€§

è¿™ä¸¤ä¸ªå±æ€§è¡¨ç¤ºçš„æ˜¯é¼ æ ‡ç›¸å¯¹äºç›®æ ‡å…ƒç´ å†…éƒ¨å·¦ä¸Šè§’çš„åç§»é‡

```typescript
const move = (e: MouseEvent) => {
  const { offsetX, offsetY } = e
  loc.X = offsetX - 90;
  loc.Y = offsetY - 90;
}
```

ç°åœ¨å½“æˆ‘ä»¬é¼ æ ‡è¿›å…¥åˆ°æŒ‰é’®å†…ç§»åŠ¨æ—¶ï¼Œæ§åˆ¶å°å°±ä¼šæŒç»­æ‰“å°å‡ºå½“å‰é¼ æ ‡åŸºäºå…ƒç´ çš„åæ ‡ä½ç½®

![20231028180033](https://raw.githubusercontent.com/QC2168/note-img/main/20231028180033.png)

æˆ‘ä»¬æ–°å»ºä¸€ä¸ª`reactive`å±æ€§ï¼Œç”¨æ¥å­˜æ”¾å½“å‰é¼ æ ‡åæ ‡ç³»ï¼Œæ–¹ä¾¿åç»­å°†å€¼ç»‘å®šåˆ°å…ƒç´ ä¸­

è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬çš„é¼ æ ‡æŒ‡é’ˆæ˜¯åœ¨åœ†å½¢å…ƒç´ çš„ä¸­é—´ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å°†`offsetX`ï¼Œ`offsetY`å„è‡ªå‡å»`90px`ï¼Œä¹Ÿå°±æ˜¯`width/2`å’Œ`height/2`

```typescript
// å­˜æ”¾åæ ‡ä¿¡æ¯
const loc = reactive({
  X: 0,
  Y: 0
})

// é¼ æ ‡äº‹ä»¶
const move = (e: MouseEvent) => {
  const { offsetX, offsetY } = e
  loc.X = offsetX - 90;
  loc.Y = offsetY - 90;
}
```

å°†`loc`å¯¹è±¡ç»‘å®šç»™`follow`å…ƒç´ ä½œä¸ºæ ·å¼

```vue
<span class="follow" ref="followRef" :style="{ transform: `translate(${loc.X}px, ${loc.Y}px)` }"></span>
```

> å°å°çŸ¥è¯†ç‚¹ï¼šä½¿ç”¨`transform`è¿›è¡Œç§»åŠ¨å¯ä»¥ä¼˜åŒ–æ€§èƒ½ï¼Œå› ä¸ºå®ƒä¸ä¼šè§¦å‘é¡µé¢çš„`reflow`ï¼Œ`reflow`æ˜¯æ¯”è¾ƒæ¶ˆè€—æ€§èƒ½çš„æ“ä½œ

æˆ‘ä»¬è¯•ä¸€ä¸‹æ•ˆæœï¼Œè·Ÿç€é¼ æ ‡ç§»åŠ¨çš„æ•ˆæœè²Œä¼¼æ˜¯å®ç°äº†ï¼Œä½†æ˜¯ä½ æœ‰æ²¡æœ‰å‘ç°æ¯æ¬¡ç§»åŠ¨çš„æ—¶å€™`follow`å…ƒç´ æ€»ä¼šé—ªåˆ°åä¸Šè§’å»ï¼Œè€Œä¸”`offsetX`ï¼Œ`offsetY`è¾“å‡ºäº†`{offsetX: 171, offsetY: 63}`

![feat-btn1](https://raw.githubusercontent.com/QC2168/note-img/main/feat-btn1.gif)

æˆ‘ä»¬ç»™`follow`å…ƒç´ æ·»åŠ ä¸Š`pointer-events: none;`å³å¯è§£å†³é—®é¢˜

åœ¨å¤šä¸ªå…ƒç´ é‡å åœ¨ä¸€èµ·æ—¶ï¼Œ`event.target`ä¼šå‘ç”Ÿå˜åŠ¨ï¼Œå¯ä»¥æ‰“å°ä¸€ä¸‹çœ‹çœ‹

![20231028185622](https://raw.githubusercontent.com/QC2168/note-img/main/20231028185622.png)

äº‹ä»¶ç›®æ ‡å…ƒç´ ä¸€ç›´åœ¨`span`å’Œ`div`æ ‡ç­¾ä¸­æ¥å›åˆ‡æ¢ï¼Œå¯¼è‡´æˆ‘ä»¬å‡ºç°æŠ–åŠ¨çš„æ•ˆæœ

æ¥çœ‹çœ‹è°ƒæ•´è¿‡çš„æ•ˆæœï¼

![feat-btn2](https://raw.githubusercontent.com/QC2168/note-img/main/feat-btn2.gif)

## å®ç°åŠ¨ç”»æ•ˆæœ

è¿™é‡Œå¯ä»¥ä½¿ç”¨CSSä¸­çš„è¿‡æ¸¡åŠ¨ç”»æ¥å®ç°æˆ‘ä»¬çš„éœ€æ±‚ï¼Œè¿™é‡Œä½¿ç”¨`scale`å‡½æ•°ç”¨æ¥æ”¹å˜`follow`å…ƒç´ çš„ç¼©æ”¾æ•ˆæœï¼Œå½“é¼ æ ‡è¿›å…¥åˆ°å…ƒç´ ä¸­ï¼Œ`scale`å€¼ä¼šä»`0`åˆ°`1`ï¼Œåä¹‹ï¼Œé‡ç½®ä¸º`0`

æˆ‘ä»¬ç»™å¤–éƒ¨çš„`div`ç»‘å®šå¤šä¸¤ä¸ªäº‹ä»¶ï¼Œåˆ†åˆ«æ˜¯`mouseenter`ï¼Œ`mouseleave`ï¼Œç”¨æ¥è®°å½•å½“å‰é¼ æ ‡æ˜¯å¦è¿›å…¥åˆ°å…ƒç´ ä¸­

å®šä¹‰ä¸¤ä¸ª`ref`å±æ€§ï¼Œç”¨æ¥è®°å½•`transitionDuration`å€¼ï¼ˆå…ƒç´ CSSå±æ€§çš„è¿‡æ¸¡æ—¶é—´ï¼‰å’Œ`isShowCircle`æ˜¯å¦æ˜¾ç¤º`follow`å…ƒç´ 


```html
<!-- ç»‘å®šé¼ æ ‡äº‹ä»¶å’ŒCSSå±æ€§å€¼ -->
<div class="custom-button" @mousemove="move" @mouseenter="enter" @mouseleave="leave">
  <span class="follow" ref="followRef"
    :style="{ transform: `translate(${loc.X}px, ${loc.Y}px) scale(${isShowCircle ? 1 : 0})`, transitionDuration: tds }"></span>
  æŒ‰é’®
</div>
```
```typescript
// æ˜¯å¦æ˜¾ç¤ºåœ†å½¢
const isShowCircle = ref(false)
// è¿‡æ¸¡æ—¶é—´
const tds = ref('0.2s')
// å½“é¼ æ ‡è¿›å…¥åˆ°å…ƒç´ åè§¦å‘
const enter = () => {
  isShowCircle.value = true
  // è¿™é‡Œè¦æ³¨æ„ä¸‹
  // éœ€è¦å»¶è¿Ÿè®¾ç½®tdså€¼ï¼Œå¦åˆ™ä¼šå‡ºç°è¿›å…¥æ—¶åŠ¨ç”»ä¸¢å¤±æ•ˆæœ
  setTimeout(() => {
    tds.value = '0s';
  }, 200);
}
// å½“é¼ æ ‡ç¦»å¼€å…ƒç´ åè§¦å‘
const leave = () => {
  isShowCircle.value = false
  tds.value = '0.2s';
}
```

ç°åœ¨å°±å¯ä»¥æ¥çœ‹çœ‹æˆ‘ä»¬æ•ˆæœæ€ä¹ˆæ ·

![feat-btn-effect](https://raw.githubusercontent.com/QC2168/note-img/main/feat-btn-effect.gif)

### è§£å†³æ–‡å­—å±‚çº§é—®é¢˜

ç°åœ¨æˆ‘ä»¬çš„ç‰¹æ•ˆä¼šå°†æŒ‰é’®ä¸­çš„æ–‡å­—è¦†ç›–æ‰ï¼Œæ˜¯å› ä¸ºå½“å…„å¼Ÿå…ƒç´ è„±ç¦»äº†æ–‡æ¡£æµä¹‹åï¼Œå…ƒç´ çš„å±‚çº§å¯èƒ½ä¼šæ¯”å…„å¼Ÿå…ƒç´ ç•¥é«˜ä¸€äº›ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨æŒ‰é’®é‡Œçš„æ–‡å­—ç”¨`span`æ ‡ç­¾åŒ…è£¹ç€ï¼Œå¹¶ç»™ä»–æŒ‡å®šä¸€ä¸ªé€‚å½“çš„`z-index`å³å¯è§£å†³è¿™ä¸ªé—®é¢˜

åˆ«å¿˜è®°äº†ï¼Œä¹Ÿè¦è®¾ç½®`pointer-events: none;`å“¦ï¼Œå¦åˆ™ä¼šå‡ºç°æŠ–åŠ¨é—®é¢˜

```css
.text {
    z-index: 1;
    pointer-events: none;
}
```

### æ‰©å±•

åœ¨`Vue`é¡¹ç›®å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šé‡åˆ°ä¸€ä»½ä»£ç é‡å¤ä½¿ç”¨çš„æƒ…å†µï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨`Vue`ç»„ä»¶çš„æ–¹å¼æ¥å°è£…è¿™ä¸ªæŒ‰é’®

è¿™é‡Œæˆ‘å°±ç›´æ¥æŠŠä»£ç è´´åœ¨è¿™é‡Œå•¦ï¼Œæœ‰éœ€è¦çš„åŒå­¦å¯ä»¥ä»è¿™é‡Œ`Copy`~~ ğŸ¥°ğŸ¥°

```vue
<template>
    <div class="custom-button" @mousemove="move" @mouseenter="enter" @mouseleave="leave">
        <span class="follow" ref="followRef"
            :style="{ transform: `translate(${loc.X}px, ${loc.Y}px) scale(${isShowCircle ? 1 : 0})`, transitionDuration: tds }"></span>
        <span class="text">
            <slot></slot>
        </span>
    </div>
</template>
<script setup lang="ts">
import { reactive, ref } from 'vue';

const isShowCircle = ref(false)
const followRef = ref()
const loc = reactive({
    X: 0,
    Y: 0
})
const tds = ref('0.2s')
const enter = () => {
    isShowCircle.value = true
    setTimeout(() => {
        tds.value = '0s';
    }, 200);
}
const leave = () => {
    isShowCircle.value = false
    tds.value = '0.2s';
}
const move = (e: MouseEvent) => {
    const { offsetX, offsetY } = e
    loc.X = offsetX - 90;
    loc.Y = offsetY - 90;
}

</script>
<style scoped>
.custom-button {
    height: 80px;
    width: 400px;
    background: linear-gradient(to right, #39D5FF, #868bff);
    color: #fff;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
}

.follow {
    width: 180px;
    height: 180px;
    background: radial-gradient(circle, #868bff 0%, transparent 70%, transparent 100%);
    transform-origin: center;
    pointer-events: none;
    position: absolute;
    left: 0;
    top: 0;
}

.text {
    z-index: 1;
    pointer-events: none;
}
</style>
```

é¡¹ç›®åœ°å€ï¼š[track-gradient-button](https://github.com/QC2168/track-gradient-button)