ğŸ‘‡ **é˜…è¯»æœ¬æ–‡ä½ å°†å­¦ä¹ åˆ°** ğŸ‘‡

- ç±»ä¸­çš„æ„é€ å‡½æ•°
- ç±»çš„å®ä¾‹ã€é™æ€ã€ç§æœ‰å±æ€§
- ç±»çš„å®ä¾‹ã€é™æ€ã€ç§æœ‰æ–¹æ³•
- ç±»çš„ç»§æ‰¿
- `Getter and Setter`
- å…³äº`class`ä¸€äº›æ‰©å±•çŸ¥è¯†ç‚¹

åœ¨`ES6`ï¼ˆ`ECMAScript6`ï¼‰ä¹‹å‰ï¼Œ`JavaScript`è¯­æ³•ä¸­æ˜¯ä¸æ”¯æŒç±»çš„ï¼Œå¯¼è‡´é¢å‘å¯¹è±¡ç¼–ç¨‹æ–¹æ³•æ— æ³•ç›´æ¥ä½¿ç”¨ï¼Œä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡functionæ¥å®ç°æ¨¡æ‹Ÿå‡ºç±»ï¼Œè€Œéšç€`JavaScript`çš„æ›´æ–°ï¼Œåœ¨`ES6`å‡ºç°äº†ä¸­å‡ºç°`class`å…³é”®å­—ï¼Œå¯ä»¥ç”¨äºå®šä¹‰ç±»ã€‚æ¥ä¸‹æ¥è®©æˆ‘ä»¬çœ‹çœ‹å®ƒçš„å¦‚ä½•ä½¿ç”¨çš„ã€‚

### class

ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•ä½¿ç”¨`class`å…³é”®å­—å£°æ˜ä¸€ä¸ªç±»ã€‚

```javascript
class Animal {

}

// or

const Animal = class {

}
```

è€Œåœ¨`ES6`ä¹‹å‰ï¼Œæˆ‘ä»¬éƒ½æ˜¯é€šè¿‡ä»¥ä¸‹è¿™æ ·å­çš„æ–¹å¼æ¥æ¨¡æ‹Ÿå‡ºç±»çš„ã€‚

```javascript
function Animal(){

}
```

### ç±»çš„æ„é€ å‡½æ•°

æ¯ä¸€ä¸ªç±»éƒ½å¯ä»¥æœ‰ä¸€ä¸ªè‡ªå·±çš„æ„é€ å‡½æ•°ï¼Œè¿™ä¸ªåç§°æ˜¯å›ºå®šçš„`constructor`ï¼Œå½“æˆ‘ä»¬é€šè¿‡`new`è°ƒç”¨ä¸€ä¸ªç±»æ—¶ï¼Œè¿™ä¸ªç±»å°±ä¼šè°ƒç”¨è‡ªå·±çš„`constructor`æ–¹æ³•ï¼ˆæ„é€ å‡½æ•°ï¼‰ã€‚

- å®ƒç”¨äºåˆ›å»ºå¯¹è±¡æ—¶ç»™ç±»ä¼ é€’ä¸€äº›å‚æ•°
- æ¯ä¸€ä¸ªç±»åªèƒ½æœ‰ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå¦åˆ™æŠ¥é”™

é€šè¿‡`new`è°ƒç”¨ä¸€ä¸ªç±»æ—¶ï¼Œä¼šè°ƒç”¨æ„é€ å‡½æ•°ï¼Œæ‰§è¡Œå¦‚ä¸‹æ“ä½œè¿‡ç¨‹ï¼š

1. åœ¨å†…å­˜ä¸­å¼€è¾Ÿä¸€å—æ–°çš„ç©ºé—´ç”¨äºåˆ›å»ºæ–°çš„å¯¹è±¡
2. è¿™ä¸ªå¯¹è±¡å†…éƒ¨çš„`prototype`å±æ€§ä¼šè¢«èµ‹å€¼ä¸ºè¯¥ç±»çš„`prototype`å±æ€§
3. æ„é€ å‡½æ•°å†…çš„thisï¼ŒæŒ‡å‘åˆ›å»ºå‡ºæ¥çš„æ–°å¯¹è±¡
4. æ‰§è¡Œæ„é€ å‡½æ•°çš„å†…éƒ¨ä»£ç 
5. å¦‚æœå‡½æ•°æ²¡æœ‰è¿”å›å¯¹è±¡ï¼Œåˆ™è¿”å›`this`

```javascript
class Animal  {
  // ç±»çš„æ„é€ æ–¹æ³•
  // ç”¨äºæ¥æ”¶å‡½æ•°
  constructor(name) {
    this.name = name;
  }
}

var a = new Animal("ABC");
console.log(a); // Animal { name: 'ABC' }
```

ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åœ¨`class`ä¸­å®šä¹‰çš„`constructor`ï¼Œè¿™ä¸ªå°±æ˜¯æ„é€ æ–¹æ³•ï¼Œè€Œ`this`ä»£è¡¨çš„æ˜¯å®ä¾‹å¯¹è±¡ã€‚

è¿™ä¸ª`class`ï¼Œä½ å¯ä»¥æŠŠå®ƒçœ‹ä½œæ„é€ å‡½æ•°çš„å¦å¤–ä¸€ç§å†™æ³•ï¼Œå› ä¸ºå®ƒå’Œå®ƒçš„æ„é€ å‡½æ•°çš„ç›¸ç­‰çš„ï¼Œå³æ˜¯ç±»æœ¬èº«æŒ‡å‘æ„é€ å‡½æ•°ã€‚

```javascript
console.log(Animal === Animal.prototype.constructor); // true
```

å…¶å®ï¼Œåœ¨ç±»ä¸Šçš„æ‰€æœ‰æ–¹æ³•éƒ½ä¼šæ”¾åœ¨`prototype`å±æ€§ä¸Šã€‚

### ç±»ä¸­çš„å±æ€§

#### å®ä¾‹å±æ€§

å®ä¾‹çš„å±æ€§å¿…é¡»å®šä¹‰åœ¨ç±»çš„æ–¹æ³•é‡Œï¼Œå°±å¦‚ä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬åœ¨æ„é€ å‡½æ•°ä¸­å®šä¹‰`name`è¿™ä¸ªå±æ€§ã€‚

```javascript
class Animal{
  constructor(name,height,weight) {
    this.name = name;
    this.height = height
    this.weight = weight
  }
}
```

#### é™æ€å±æ€§

å½“æˆ‘ä»¬æŠŠä¸€ä¸ªå±æ€§èµ‹å€¼ç»™ç±»æœ¬èº«ï¼Œè€Œä¸æ˜¯èµ‹å€¼ç»™å®ƒ`prototype`ï¼Œè¿™æ ·å­çš„å±æ€§è¢«ç§°ä¹‹ä¸ºé™æ€å±æ€§ï¼ˆ`static`ï¼‰ã€‚

é™æ€å±æ€§ç›´æ¥é€šè¿‡ç±»æ¥è®¿é—®ï¼Œæ— éœ€åœ¨å®ä¾‹ä¸­è®¿é—®ã€‚

```javascript
class Foo{
  static name ='_island'
}

console.log(Foo.name);
```

#### ç§æœ‰å±æ€§

ç§æœ‰å±æ€§åªèƒ½åœ¨ç±»ä¸­è¯»å–ã€å†™å…¥ï¼Œä¸èƒ½é€šè¿‡å¤–éƒ¨å¼•ç”¨ç§æœ‰å­—æ®µã€‚

```javascript
class Animal{
  #age;
  constructor(name,age){
    this.name=name
    this.#age=age
  }
}

var a = new Animal('_island',18)
console.log(a); // Animal { name: '_island' }
console.log(a.name); // _island
console.log(a.age); // undefined
console.log(a.#age); // Private field '#age' must be declared in an enclosing class
```

æˆ‘ä»¬é€šè¿‡`getOwnPropertyDescriptors`æ–¹æ³•è·å–åˆ°å®ƒçš„å±æ€§ï¼ŒåŒæ ·ä¹Ÿæ˜¯è·å–ä¸åˆ°ã€‚

```javascript
console.log(Object.getOwnPropertyDescriptors(a))

{
  name: {
    value: '_island',
    writable: true,
    enumerable: true,
    configurable: true
  }
}
```

> ç§æœ‰å­—æ®µä»…èƒ½åœ¨å­—æ®µå£°æ˜ä¸­é¢„å…ˆå®šä¹‰ã€‚
>

> å…¬å…±å’Œç§æœ‰å­—æ®µå£°æ˜æ˜¯JavaScriptæ ‡å‡†å§”å‘˜ä¼š[TC39](https://tc39.es/)æå‡ºçš„[å®éªŒæ€§åŠŸèƒ½ï¼ˆç¬¬3é˜¶æ®µï¼‰](https://github.com/tc39/proposal-class-fields)ã€‚æµè§ˆå™¨ä¸­çš„æ”¯æŒæ˜¯æœ‰é™çš„ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡[Babel](https://babeljs.io/)ç­‰ç³»ç»Ÿæ„å»ºåä½¿ç”¨æ­¤åŠŸèƒ½ã€‚

### ç±»ä¸­çš„æ–¹æ³•

#### å®ä¾‹æ–¹æ³•

åœ¨`ES6`ä¹‹å‰ï¼Œæˆ‘ä»¬å®šä¹‰ç±»ä¸­çš„æ–¹æ³•æ˜¯ç±»ä¸­çš„åŸå‹ä¸Šè¿›è¡Œå®šä¹‰çš„ï¼Œé˜²æ­¢ç±»ä¸­çš„æ–¹æ³•é‡å¤åœ¨å¤šä¸ªå¯¹è±¡ä¸Šã€‚

```javascript
function Animal() {}
Animal.prototype.eating = function () {
  console.log(this.name + " eating");
};
```

åœ¨`ES6`ä¸­ï¼Œå®šä¹‰ç±»ä¸­çš„æ–¹æ³•æ›´åŠ ç®€æ´ï¼Œç›´æ¥åœ¨ç±»ä¸­å®šä¹‰å³å¯ï¼Œè¿™æ ·å­çš„å†™æ³•å³ä¼˜é›…å¯è¯»æ€§ä¹Ÿå¼ºã€‚

```javascript
class Animal{
  eating() {
    console.log(this.name + " eating");
  }
}
```

#### é™æ€æ–¹æ³•

é™æ€æ–¹æ³•ä¸ä¸Šé¢æåˆ°çš„é™æ€å±æ€§æ˜¯ä¸€æ ·çš„ï¼Œåœ¨æ–¹æ³•å‰é¢ä½¿ç”¨`static`å…³é”®å­—è¿›è¡Œå£°æ˜ï¼Œä¹‹åè°ƒç”¨è¿™ä¸ªæ–¹æ³•æ—¶ä¸éœ€è¦é€šè¿‡ç±»çš„å®ä¾‹æ¥è°ƒç”¨ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ç±»åæ¥è°ƒç”¨å®ƒã€‚

```javascript
class Animal{
  static createName(name) {
    return name
  }
}

var a2 = Animal.createName("_island");
console.log(a2); // _island
```

#### ç§æœ‰æ–¹æ³•

åœ¨é¢å‘å¯¹è±¡ä¸­ï¼Œç§æœ‰æ–¹æ³•æ˜¯ä¸€ä¸ªå¸¸è§éœ€æ±‚ï¼Œä½†æ˜¯åœ¨ES6ä¸­æ²¡æœ‰æä¾›ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æŸä¸ªæ–¹æ³•æ¥å®ç°å®ƒã€‚

```
class Foo {
  __getBloodType() {
    return "O";
  }
}

```

> éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé€šè¿‡ä¸‹åˆ’çº¿å¼€å¤´é€šå¸¸æˆ‘ä»¬ä¼šå±€é™å®ƒæ˜¯ä¸€ä¸ªç§æœ‰æ–¹æ³•ï¼Œä½†æ˜¯åœ¨ç±»çš„å¤–éƒ¨è¿˜æ˜¯å¯ä»¥æ­£å¸¸è°ƒç”¨åˆ°è¿™ä¸ªæ–¹æ³•çš„

### ç±»çš„ç»§æ‰¿

`extends`å…³é”®å­—ç”¨äºæ‰©å±•å­ç±»ï¼Œåˆ›å»ºä¸€ä¸ªç±»ä½œä¸ºå¦å¤–ä¸€ä¸ªç±»çš„ä¸€ä¸ªå­ç±»ã€‚

å®ƒä¼šå°†çˆ¶ç±»ä¸­çš„å±æ€§å’Œæ–¹æ³•ä¸€èµ·ç»§æ‰¿åˆ°å­ç±»çš„ï¼Œå‡å°‘å­ç±»ä¸­é‡å¤çš„ä¸šåŠ¡ä»£ç ã€‚

è¿™å¯¹æ¯”ä¹‹å‰åœ¨`ES5`ä¸­ä¿®æ”¹åŸå‹é“¾å®ç°ç»§æ‰¿çš„æ–¹æ³•çš„å¯è¯»æ€§è¦å¼ºå¾ˆå¤šï¼Œè€Œä¸”å†™æ³•å¾ˆç®€æ´ã€‚

#### extendsçš„ä½¿ç”¨

```javascript
class Animal{

}

// dog ç»§æ‰¿ Animal ç±»
class dog extends Animal {

}
```

#### ç»§æ‰¿ç±»çš„å±æ€§å’Œæ–¹æ³•

ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å®šä¹‰äº†`dog`è¿™ä¸ªç±»ï¼Œé€šè¿‡`extends`å…³é”®å­—ç»§æ‰¿äº†`Animal`ç±»çš„å±æ€§å’Œæ–¹æ³•ã€‚

åœ¨å­ç±»çš„`constructor`æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†`super`å…³é”®å­—ï¼Œåœ¨å­ç±»ä¸­å®ƒæ˜¯å¿…é¡»å­˜åœ¨çš„ï¼Œå¦åˆ™æ–°å»ºå®ä¾‹æ—¶ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚è¿™æ˜¯å› ä¸ºå­ç±»çš„thiså¯¹è±¡æ˜¯ç»§æ‰¿è‡ªçˆ¶ç±»çš„thiså¯¹è±¡ï¼Œå¦‚æœä¸è°ƒç”¨`super`æ–¹æ³•ï¼Œå­ç±»å°±å¾—ä¸åˆ°`this`å¯¹è±¡ã€‚

```javascript
class Animal {
  constructor(name) {
    this.name = name;
  }
  eating() {
    console.log(this.name + " eating");
  }
}

// dog ç»§æ‰¿ Animal ç±»
class dog extends Animal {
  constructor(name, legs) {
    super(name);
    this.legs = legs;
  }
  speaking() {
    console.log(this.name + " speaking");
  }
}

var d = new dog("tom", 4);
d.eating(); // tom eating
d.speaking(); // tom speaking
console.log(d.name); // tom
```

#### Super

**super**å…³é”®å­—ç”¨äºè®¿é—®å’Œè°ƒç”¨ä¸€ä¸ªå¯¹è±¡çš„çˆ¶å¯¹è±¡ä¸Šçš„å‡½æ•°ã€‚

`super`æŒ‡çš„æ˜¯è¶…çº§ã€é¡¶çº§ã€çˆ¶ç±»çš„æ„æ€

åœ¨å­ç±»çš„æ„é€ å‡½æ•°ä¸­ä½¿ç”¨`this`æˆ–è€…è¿”å›é»˜è®¤å¯¹è±¡ä¹‹å‰ï¼Œå¿…é¡»å…ˆé€šè¿‡`super`è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚

ä¸‹é¢è¿™æ®µä»£ç ï¼Œå­ç±»çš„`constructor`æ–¹æ³•ä¸­å…ˆè°ƒç”¨äº†`super`æ–¹æ³•ï¼Œå®ƒä»£è¡¨äº†çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬æŠŠå‚æ•°ä¼ é€’è¿›å»ä¹‹åï¼Œå…¶å®å®ƒæ˜¯è°ƒç”¨äº†çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚

```javascript
class Animal{
  constructor(name)
}

class dog{
  constructor(name,type,weight){
    super(name)
    this.type=type
    this.weight=weight
  }
}
```

ä¸‹é¢è¿™æ®µä»£ç ä½¿ç”¨superè°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•

```javascript
class Animal {
  constructor(name) {
    this.name = name;
  }
  eating() {
    console.log(this.name + " eating");
  }
}

// dog ç»§æ‰¿ Animal ç±»
class dog extends Animal {
  constructor(name, legs) {
    super(name);
    this.legs = legs;
  }
  speaking() {
    super.eating()
    console.log(this.name + " speaking");
  }
  
}

var d = new dog("tom",4);
d.speaking(); // tom eating tom speaking
```

### Getter å’Œ Setter

åœ¨ç±»å†…éƒ¨ä¹Ÿå¯ä»¥ä½¿ç”¨`get`å’Œ`set`å…³é”®å­—ï¼Œå¯¹åº”æŸä¸ªå±æ€§è®¾ç½®å­˜å€¼å’Œå–å€¼å‡½æ•°ï¼Œæ‹¦æˆªå±æ€§çš„å­˜å–è¡Œä¸ºã€‚

```javascript
class Animal {
  constructor() {
    this._age = 3;
  }

  get age() {
    return this._age;
  }

  set age(val) {
    this._age = val;
  }
}

var a = new Animal();
console.log(a.age); // 3
a.age = 4;
console.log(a.age); //4
```

### å…³äºclassæ‰©å±•

#### ä¸¥æ ¼æ¨¡å¼

åœ¨ç±»å’Œæ¨¡å—çš„å†…éƒ¨ï¼Œé»˜è®¤æ˜¯ä¸¥æ ¼æ¨¡å¼ï¼Œæ‰€ä»¥ä¸éœ€è¦ä½¿ç”¨`use strict`æŒ‡å®šè¿è¡Œæ¨¡å¼ã€‚åªè¦ä½ çš„ä»£ç å†™åœ¨ç±»æˆ–æ¨¡å—ä¹‹ä¸­ï¼Œå°±åªæœ‰ä¸¥æ ¼æ¨¡å¼å¯ç”¨ã€‚

#### nameå±æ€§

`ES6`ä¸­çš„ç±»åªæ˜¯`ES5`æ„é€ å‡½æ•°çš„ä¸€å±‚åŒ…è£…ï¼Œæ‰€ä»¥å‡½æ•°çš„è®¸å¤šå±æ€§éƒ½è¢«`class`ç»§æ‰¿äº†ï¼ŒåŒ…æ‹¬`name`å±æ€§ã€‚

```javascript
class Animal{

}
console.log(Animal.name); // Animal
```

#### å˜é‡æå‡

`class`ä¸å­˜åœ¨å˜é‡æå‡ï¼Œè¿™ä¸æˆ‘ä»¬åœ¨`ES5`ä¸­å®ç°ç±»çš„ä¸åŒçš„ï¼Œ`function`å…³é”®å­—ä¼šå­˜åœ¨å˜é‡æå‡ã€‚

```javascript
new Foo(); // ReferenceError
class Foo {}
```

### æ€»ç»“

åœ¨`ES6`ä¹‹åï¼Œæˆ‘ä»¬åœ¨å®šä¹‰ç±»ä»¥åŠå®ƒå†…éƒ¨çš„å±æ€§æ–¹æ³•ï¼Œè¿˜æœ‰ç»§æ‰¿æ“ä½œçš„è¯­æ³•å˜å¾—éå¸¸ç®€æ´ä¸”æ˜“æ‡‚ï¼Œ`class`æ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œå…¶å†…éƒ¨è¿˜æ˜¯é€šè¿‡`ES5`ä¸­çš„è¯­æ³•æ¥å®ç°çš„ã€‚ä¸”æœ‰äº›æµè§ˆå™¨ä¸æ”¯æŒ`class`è¯­æ³•ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡`babel`æ¥è¿›è¡Œè½¬æ¢ã€‚


