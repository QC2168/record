(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{606:function(t,s,a){"use strict";a.r(s);var e=a(17),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"git-commit提交规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git-commit提交规范"}},[t._v("#")]),t._v(" GIT commit提交规范")]),t._v(" "),a("p",[t._v("「这是我参与2022首次更文挑战的第20天，活动详情查看："),a("a",{attrs:{href:"https://juejin.cn/post/7052884569032392740",target:"_blank",rel:"noopener noreferrer"}},[t._v("2022首次更文挑战"),a("OutboundLink")],1),t._v("」")]),t._v(" "),a("p",[t._v("阅读本文章你将收获到：")]),t._v(" "),a("ul",[a("li",[t._v("什么是约定式提交")]),t._v(" "),a("li",[a("code",[t._v("angular commit")]),t._v("规范")]),t._v(" "),a("li",[t._v("如何在项目中约束"),a("code",[t._v("commit message")])])]),t._v(" "),a("h3",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),a("p",[t._v("在编写这一篇文章时，说明我已经意识到我的每一次"),a("code",[t._v("git commit")]),t._v("应该要有一个规范，明确表达我的每一次"),a("code",[t._v("commit")]),t._v("的目的，且在规范"),a("code",[t._v("log")]),t._v("的同时也有助于他人"),a("code",[t._v("review")]),t._v("，还能有效输出项目的"),a("code",[t._v("CHANGELOG.md")]),t._v("。")]),t._v(" "),a("p",[t._v("我们看下不太规范的"),a("code",[t._v("commit")]),t._v("，是不是感觉这种"),a("code",[t._v("commit")]),t._v("信息有点乱，且如果这种"),a("code",[t._v("commit")]),t._v("写得再乱一点可能其他人想从这里面的"),a("code",[t._v("commit")]),t._v("获取有效信息有点困难。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/QC2168/note-img/main/202202081429851.png",alt:"image-20220208142940703"}})]),t._v(" "),a("p",[t._v("我们可以看下"),a("code",[t._v("vue")]),t._v("、"),a("code",[t._v("react")]),t._v("这些主流的前端框架在"),a("code",[t._v("github")]),t._v("上的"),a("code",[t._v("commit message")]),t._v("，在每一条"),a("code",[t._v("commit")]),t._v("的前面都会有"),a("code",[t._v("chore")]),t._v("、"),a("code",[t._v("docs")]),t._v("、"),a("code",[t._v("fix")]),t._v("等字段，分别代表修改构建流程或者增加依赖包、修改文档、修复问题。通过这些前缀我们就能直接看出每次"),a("code",[t._v("commit")]),t._v("的类型。后面接上本次提交的描述，更清晰的表达本次修改的内容。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/QC2168/note-img/main/202202081420558.png",alt:"image-20220208142007226"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/QC2168/note-img/main/202202081420714.png",alt:"image-20220208142037549"}})]),t._v(" "),a("p",[t._v("其实，它们都遵循了"),a("code",[t._v("conventional commits")]),t._v("（约定式提交）的一种提交规范，也是本文的主题。")]),t._v(" "),a("h3",{attrs:{id:"conventional-commits"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#conventional-commits"}},[t._v("#")]),t._v(" Conventional Commits")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/QC2168/note-img/main/202202081438535.png",alt:"image-20220208143859217"}})]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.conventionalcommits.org/en/v1.0.0/",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("Conventional Commits")]),a("OutboundLink")],1),t._v("是一个提交格式规范，这个规范主要是当你在"),a("code",[t._v("commit")]),t._v("的时候，对我们的提交信息做一个格式规范约束，它提供了一组简单规则来创建清晰的提交历史，通过在提交信息中描述功能、修复、破坏性变更。")]),t._v(" "),a("p",[t._v("它的"),a("code",[t._v("message")]),t._v("格式如下：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("<type>[optional scope]: <description>\n\n[optional body]\n\n[optional footer(s)]\n\n// 译\n<类型>[可选 范围]: <描述>\n\n[可选 正文]\n\n[可选 脚注]\n")])])]),a("ul",[a("li",[t._v("它总共分为三个部分\n"),a("ul",[a("li",[t._v("标题行 描述修改的类型、简短的描述 （必填）")]),t._v(" "),a("li",[t._v("主题内容 描述修改的内容 （可选）")]),t._v(" "),a("li",[t._v("页脚注释 通常用于放"),a("code",[t._v("issues")]),t._v(" （可选）")])])])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/QC2168/note-img/main/202202081506627.png",alt:"image-20220208150623469"}})]),t._v(" "),a("h3",{attrs:{id:"angular-commit规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#angular-commit规范"}},[t._v("#")]),t._v(" Angular Commit规范")]),t._v(" "),a("p",[t._v("目前，我们用得最多的是"),a("code",[t._v("Angular")]),t._v("规范，同样遵循着"),a("code",[t._v("conventional commit")]),t._v("，可以说是它的一个衍生版本，"),a("code",[t._v("angular")]),t._v("规范的"),a("code",[t._v("message")]),t._v("格式是这样子的。")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("<type>(<scope>): <subject>\n<BLANK LINE>\n<body>\n<BLANK LINE>\n<footer>\n")])])]),a("ul",[a("li",[a("p",[t._v("由以下部分构成")]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("type")]),t._v(" （必选）")]),t._v(" "),a("ul",[a("li",[a("table",[a("thead",[a("tr",[a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("feat")])]),t._v(" "),a("td",[t._v("新增特性")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("fix")])]),t._v(" "),a("td",[t._v("修复问题")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("docs")])]),t._v(" "),a("td",[t._v("修改文档")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("style")])]),t._v(" "),a("td",[t._v("修改代码格式（非CSS样式修改）")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("refactor")])]),t._v(" "),a("td",[t._v("重构代码")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("perf")])]),t._v(" "),a("td",[t._v("修改提高性能的代码")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("test")])]),t._v(" "),a("td",[t._v("新增、修改测试用例")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("chore")])]),t._v(" "),a("td",[t._v("修改构建流程,、依赖管理")])])])])])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("scope")])]),t._v(" "),a("ul",[a("li",[t._v("本次"),a("code",[t._v("commit")]),t._v("的修改影响范围")])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("subject")])]),t._v(" "),a("ul",[a("li",[t._v("本次"),a("code",[t._v("commit")]),t._v("的描述信息")])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("body")])]),t._v(" "),a("ul",[a("li",[t._v("本次"),a("code",[t._v("commit")]),t._v("具体的修改内容")])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("footer")])]),t._v(" "),a("ul",[a("li",[t._v("页脚注释 通常用于放"),a("code",[t._v("issues")])])])])])])]),t._v(" "),a("h3",{attrs:{id:"commitlint"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#commitlint"}},[t._v("#")]),t._v(" commitlint")]),t._v(" "),a("p",[t._v("接下来我们要认识一个新的工具叫"),a("code",[t._v("commitlint")]),t._v("，从它的命名我们就得知它是一个约束提交的工具库。")]),t._v(" "),a("h4",{attrs:{id:"安装commitlint"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装commitlint"}},[t._v("#")]),t._v(" 安装commitlint")]),t._v(" "),a("p",[t._v("项目级安装"),a("code",[t._v("commitlint")]),t._v("和"),a("code",[t._v("husky")]),t._v("，"),a("code",[t._v("commlint")]),t._v("用于对"),a("code",[t._v("commit message")]),t._v("进行格式校验，"),a("code",[t._v("husky")]),t._v("则易用"),a("code",[t._v("git hook")]),t._v("。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" -D @commitlint/config-conventional @commitlint/cli husky \n\n// or\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" -D @commitlint/config-conventional @commitlint/cli husky \n")])])]),a("h4",{attrs:{id:"配置commitlint"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置commitlint"}},[t._v("#")]),t._v(" 配置commitlint")]),t._v(" "),a("p",[t._v("在项目根目录中新建一个"),a("code",[t._v("commitlint.config.js")]),t._v("文件，配置"),a("code",[t._v("commitlint")]),t._v("。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 校验angluar commit")]),t._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@commitlint/config-conventional'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("blockquote",[a("p",[a("code",[t._v("commitlint")]),t._v("是规范"),a("code",[t._v("commit message")]),t._v("信息，不能约束其内容")])]),t._v(" "),a("h4",{attrs:{id:"激活hooks"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#激活hooks"}},[t._v("#")]),t._v(" 激活hooks")]),t._v(" "),a("p",[t._v("在终端执行以下命令，初始化"),a("code",[t._v("git hooks")]),t._v("的配置")]),t._v(" "),a("div",{staticClass:"language-cmd extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("pnpm exec husky install\n\n// husky - Git hooks installed\n")])])]),a("p",[t._v("执行上面的"),a("code",[t._v("pnpm exec husky install")]),t._v("命令之后，项目根目录会创建一个"),a("code",[t._v(".husky")]),t._v("文件夹（"),a("code",[t._v("husky hook")]),t._v("文件夹）。在这个文件夹中创建一个"),a("code",[t._v("commit-msg")]),t._v("文件，用于开发者在执行"),a("code",[t._v("commit")]),t._v("命令时进行"),a("code",[t._v("commitllint")]),t._v("校验。")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('// commit-msg\n#!/bin/sh\n. "$(dirname "$0")/_/husky.sh"\n\npnpm exec commitlint --edit $1\n')])])]),a("p",[t._v("现在，当你在"),a("code",[t._v("git commit")]),t._v("时，会触发到"),a("code",[t._v("commit-msg")]),t._v("这个"),a("code",[t._v("hooks")]),t._v("，执行"),a("code",[t._v("commitlint")]),t._v("进行"),a("code",[t._v("commit message")]),t._v("校验。当检验不通过时，则不能完成本次"),a("code",[t._v("commit")]),t._v("操作。")]),t._v(" "),a("h3",{attrs:{id:"commitizen"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#commitizen"}},[t._v("#")]),t._v(" commitizen")]),t._v(" "),a("p",[t._v("当我们约束了"),a("code",[t._v("commit message")]),t._v("之后，我们就必须符合它的提交规范才能正常完成提交，但每次提交必须一个一个字手打出来吗？")]),t._v(" "),a("p",[t._v("这时候，就要用到"),a("code",[t._v("commitizen")]),t._v("了，它是一个交互式创建提交信息的工具，用于规范化"),a("code",[t._v("git commit message")]),t._v("。可以一步一步根据我们的需求创建完整的提交信息。并且"),a("strong",[t._v("代替你平时使用的"),a("code",[t._v("git commit")])]),t._v("。")]),t._v(" "),a("p",[t._v("我们需要为"),a("code",[t._v("commitizen")]),t._v("提供一个适配器，使"),a("code",[t._v("commitizen")]),t._v("按我们指定的规范生成"),a("code",[t._v("commit message")]),t._v("，这里我们选择"),a("code",[t._v("cz-conventional-changelog")]),t._v("，也是"),a("code",[t._v("commitizen")]),t._v("首选适配器。")]),t._v(" "),a("h4",{attrs:{id:"安装commitizen"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装commitizen"}},[t._v("#")]),t._v(" 安装commitizen")]),t._v(" "),a("p",[t._v("项目级安装"),a("code",[t._v("commitizen")]),t._v("、"),a("code",[t._v("cz-conventional-changelog")]),t._v("。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" -D commitizen cz-conventional-changelog\n")])])]),a("h4",{attrs:{id:"配置commitizen"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置commitizen"}},[t._v("#")]),t._v(" 配置commitizen")]),t._v(" "),a("p",[t._v("在项目根目录中创建一个"),a("code",[t._v(".czrc")]),t._v("文件（"),a("code",[t._v("commitizen")]),t._v("配置文件）。")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('// .czrc\n\n{\n  "path": "cz-conventional-changelog"\n}\n')])])]),a("p",[t._v("安装之后，你可以通过"),a("code",[t._v("pnpm exec cz")]),t._v("触发它，或者你在"),a("code",[t._v("package.json")]),t._v("中添加一个脚本。")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// packages.json")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"commit"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cz"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),a("p",[t._v("执行"),a("code",[t._v("pnpm commit / pnpm exec cz")]),t._v("命令后，会显示一个交互式的命令行界面，你需要根据实际情况选择对应的选项，最终生成一个"),a("code",[t._v("commit message")]),t._v("并提交。可代替"),a("code",[t._v("git commit")]),t._v("。")]),t._v(" "),a("h4",{attrs:{id:"运行commit执行cz"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#运行commit执行cz"}},[t._v("#")]),t._v(" 运行commit执行cz")]),t._v(" "),a("p",[t._v("也可以在开发者在终端执行"),a("code",[t._v("git commit")]),t._v("命令时调用"),a("code",[t._v("cz")]),t._v("，在项目根目录中的"),a("code",[t._v(".husky")]),t._v("目录下创建"),a("code",[t._v("prepare-commit-msg")]),t._v("文件，用于用户执行"),a("code",[t._v("commit")]),t._v("之前运行"),a("code",[t._v("cz")]),t._v("。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[t._v("#!/bin/bash")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" /dev/tty "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" cz --hook "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n")])])]),a("h3",{attrs:{id:"最终效果"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#最终效果"}},[t._v("#")]),t._v(" 最终效果")]),t._v(" "),a("div",{staticClass:"language-powershell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[t._v("E:\\project\\viteProjects\\hkzf>pnpm commit\n\n> hkzf-ts@0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("0 commit E:\\project\\viteProjects\\hkzf\n> cz\n\ncz-"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cli")]),t._v("@4"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("4"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cz-conventional-changelog@3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("0\n\n? "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Select")]),t._v(" the "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("type")]),t._v(" of change that you're committing: feat:     A new feature\n? What is the scope of this change "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("g"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" component or file name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(": "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("press enter to skip"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n? "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Write")]),t._v(" a short"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" imperative tense description of the change "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("max 94 chars"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(":\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("6"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 新增房屋筛选\n? Provide a longer description of the change: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("press enter to skip"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n? Are there any breaking changes? No\n? Does this change affect any open issues? No\n"),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[hooks-ts b0d5f2f]")]),t._v(" feat: 新增房屋筛选\n 17 files changed"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 2988 insertions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 230 deletions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n create mode 100644 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("czrc\n create mode 100644 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("husky/commit-msg\n create mode 100644 commitlint"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n")])])]),a("p",[t._v("本质上还是调用了"),a("code",[t._v("git commit")]),t._v("命令只不过是帮我们约束了"),a("code",[t._v("commit message")]),t._v("的格式再"),a("code",[t._v("commit")]),t._v("。我们也可以对"),a("code",[t._v("commitizen")]),t._v("的交互界面做出自定义配置，下面我们将交互界面的语言替换成简体中文版，更符合国人的使用。")]),t._v(" "),a("h3",{attrs:{id:"cz-customizable"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cz-customizable"}},[t._v("#")]),t._v(" cz-customizable")]),t._v(" "),a("p",[a("code",[t._v("cz-customizable")]),t._v("也是一个适配器，它可以帮助我们达到你想要的规范效果。")]),t._v(" "),a("h3",{attrs:{id:"安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[t._v("#")]),t._v(" 安装")]),t._v(" "),a("p",[t._v("项目级安装"),a("code",[t._v("cz-customizable")]),t._v("。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("pnpm add "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("D")]),t._v(" cz"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("customizable\n")])])]),a("h3",{attrs:{id:"配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[t._v("#")]),t._v(" 配置")]),t._v(" "),a("p",[t._v("在项目根目录创建"),a("code",[t._v(".cz-config.js")]),t._v("配置文件，为"),a("code",[t._v("cz-customizable")]),t._v("配置工作模式。官方也提供了一份参考的配置文件："),a("a",{attrs:{href:"https://github.com/leoforfree/cz-customizable/blob/master/cz-config-EXAMPLE.js",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("cz-config-EXAMPLE.js")]),a("OutboundLink")],1),t._v("（参考），我们使用汉化版的配置文件。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// .cz-config.js")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'use strict'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("types")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'feat'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("     "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'特性:    一个新的特性'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fix'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'修复:    修复一个Bug'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'docs'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("     "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'文档:    变更的只有文档'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'style'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'格式:    空格, 分号等格式修复'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'refactor'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'重构:    代码重构，注意和特性、修复区分开'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'perf'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("     "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'性能:    提升性能'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("     "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'测试:    添加一个测试'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'build'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("     "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'构建:    影响构建系统或外部依赖项的更改'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ci'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("     "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ci:    更改为我们的CI配置文件和脚本'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("messages")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'选择一种你的提交类型:'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("scope")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'选择一个scope (可选):'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// used if allowCustomScopes is true")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("customScope")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'模块名称:'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("subject")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'短描述:\\n'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("body")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'长描述，使用\"|\"换行(可选)：\\n'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("breaking")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'非兼容性说明 (可选):\\n'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("footer")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'关联关闭的issue，例如：#1, #2(可选):\\n'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("confirmCommit")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'确定提交?'")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("allowCustomScopes")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("allowBreakingChanges")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'feat'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fix'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("subjectLimit")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("在项目根目录中的"),a("code",[t._v(".czrc")]),t._v("文件中，将目标适配器修改成"),a("code",[t._v("cz-customizable")]),t._v("即可。")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('{\n    "path": "cz-customizable"\n}\n')])])]),a("h3",{attrs:{id:"效果"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#效果"}},[t._v("#")]),t._v(" 效果")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/QC2168/note-img/main/202202092149184.png",alt:"image-20220209214905892"}})]),t._v(" "),a("h3",{attrs:{id:"总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),a("p",[t._v("本文简单介绍了约定式提交，并引入了当前项目中使用最多的"),a("code",[t._v("angular")]),t._v("团队的规范。并将这个规范约束带到项目中应用。"),a("code",[t._v("commit message")]),t._v("规范是非常重要的，约束得每一次"),a("code",[t._v("commit")]),t._v("的格式。")])])}),[],!1,null,null,null);s.default=n.exports}}]);